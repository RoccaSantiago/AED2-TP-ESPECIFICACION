\documentclass[10pt,a4paper]{article}

\input{AEDmacros}
\usepackage{caratula} % Version modificada para usar las macros de algo1 de ~> https://github.com/bcardiff/dc-tex


\titulo{Trabajo pr\'actico 1: Especificac\'ion y WP}
\subtitulo{Elecciones Nacionales}

\fecha{\today}

\materia{Algoritmos y Estructuras de Datos}
\grupo{sudo\_rm-rf\_/*}

\integrante{Rocca, Santiago}{152/23}{santiagrocca17@gmail.com}
\integrante{Fisz, Maximiliano}{586/19}{maximilianofisz@gmail.com}   
\integrante{Gomez, Abril}{574/20}{goskema@gmail.com}
\integrante{L\'opez, Gonzalo}{1017/22}{gonzalo.esloga.uba@gmail.com}
% Pongan cuantos integrantes quieran

% Declaramos donde van a estar las figuras
% No es obligatorio, pero suele ser comodo
\graphicspath{{../static/}}

\begin{document}

\maketitle

\section{Especificaci\'on}
	


\subsection{hayBallotage}
		\subsubsection{Main}

			\begin{proc}{hayBallotage}{\In escrutinio : \TLista{\ent}}{\bool}
	
				\requiere{eleccionValida(escrutinio))}
	
				\asegura{res=\neg((cond1HayBallotage(escrutinio))\lor_{ L }(cond2HayBallotage(escrutinio)))}

			\end{proc}

		\subsubsection{Predicados Especificos}

			\pred{cond1HayBallotage}{\In escrutinio : \TLista{\ent}}{(\exists n:\ent)(0 \leq n < |escrutinio| \land_{ L }(porcentajeDeVotos(escrutinio,escrutinio[x])>45)}


			\pred{cond2HayBallotage}{\In escrutinio : \TLista{\ent}}{(\exists n:\ent)(0 \leq n < |escrutinio| \land_{ L }(porcentajeDeVotos(escrutinio,escrutinio[x])>40) \: \land_{ L } \\ \neg(\exists x:\ent)(0\leq x < |escrutinio| \land_{ L }  (\neg(n=x) 	\land_{ L } ((escrutinio[n] - escrutinio[x])>10)) }


			


\subsection{hayFraude}
		\subsubsection{Main}
			
			\begin{proc}{hayFraude}{(\In escrutinio\_Presidencial: \TLista{\ent}, \In escrutinio\_senadores: \TLista{\ent}‚ü©, \In escrutinio\_diputados: \TLista{\ent}}{\bool}
			%UMBAL ELECTORAL NO SABEMOS BIEN
				\requiere{umbralElectoral(escrutinio\_senadores)\: \land_{ L } \:eleccionValida(escrutinio\_Presidencial) \: \land_{ L } \:\\ eleccionValida(escrutinio\_senadores) \: \land_{ L } \: eleccionValida(escrutinio\_diputados)}
				
				\asegura{res=\neg(((|sumaDeVotos(escrutinio\_Presidencial) = sumaDeVotos(escrutinio\_Senadores)) \land_{L} \\ (sumaDeVotos(escrutinio\_Presidencial) = sumaDeVotos(escrutinio\_Diputados)))}
			
			\end{proc}






		
	\subsection{obtenerSenadoresEnProvincia}
		\subsubsection{Main}
			
			\begin{proc}{obtenerSenadoresEnProvincia}{\In escrutinio : \TLista{\ent}}{\ent \texttimes \ent}

                			\requiere{eleccionValida(escrutinio) \land minimoDePartidos(escrutinio)}
                			\asegura{(\exists!x : \ent) (0 \leq x < |escrutinio| - 1) \land_{L} ((\exists!y : \ent) (0 \leq y < |escrutinio| - 1) \land_{L} ((\forall i : \ent)(0 \leq i < |escrutinio| \land \neg (i= x) \land  \neg(i = y)) \longrightarrow_{L } escrutinio[i] < escrutinio[res_y] < escrutinio[res_x]))}

            	\end{proc}
		
		\subsubsection{Predicados Especificos}
			\pred{minimoDePartidos}{\In escrutinio: \TLista{\ent}}{|escrutinio| \geq 3}

	


	 \subsection{calcularDHondtEnProvincia}
		\subsubsection{Main}
			\begin{proc}{calcularDHondtEnProvincia}{\In cant\_bancas: \ent, \In escrutinio: \TLista{\ent} } {\TLista{\TLista{\ent}}}
				 
				\requiere{eleccionValida(escrutinio) \land umbralElectoral(escrutinio) \land cant\_bancas>0)}
				\asegura{((\forall \: x:\ent)(0\leq n < cant\_bancas) \land_{L} (\forall \: x:\ent)(0\leq n <|escrutinio|))\longrightarrow_{L } \: (res[x][n]=\frac{escrutinio[x]}{n+1})}

			\end{proc}



	\subsection{obtenerDiputadosEnProvincia}
		\subsubsection{Main}
			\begin{proc}{obtenerDiputadosEnProvincia}{\In cant\_bancas: \ent, \In escrutinio: \TLista{\ent}, \In dHondt: \TLista{\TLista{\ent}}} {\TLista{\ent}}
				 
				\requiere{eleccionValida(escrutinio) \land umbralElectoral(escrutinio)}
				\asegura{(\forall \: r:\ent)(0\leq r < |escrutinio| - 1 \longrightarrow_{L} res[r] = bancasDe(r, cant\_bancas, dHondt))}
			\end{proc}

		\subsubsection{Predicados Especificos}
	
			\pred{cocienteGanador}{\In indicePartido: \ent, \In bancaEnDisputa: \ent, \In dHont: \TLista{\TLista{\ent}}}{res = True \longleftrightarrow
(\forall \: i: \ent)(0 \leq i < |dHont| -1 \land \neg(i = indicePartido) \longrightarrow_{L } dHont[bancaEnDisputa][indicePartido] > dHont[bancaEnDisputa][i])}






	\subsection{validarListasDiputadosEnProvincia}
		\subsubsection{Main}
			
			\begin{proc}{(\In cant\_bancas: \ent, \In listas: \TLista{\TLista{dni:\ent \times genero: \ent}}}{\bool}
			
				\requiere{(cant\_bancas>0) \: \land (dni>0) \: \land \:  (1\leq genero \geq 2)}
				\asegura{(\forall \: \: x:\ent)(0\leq x<|listas|) \longrightarrow_{L} (cantCandidatosCorrecta(cant\_bancas,\: listas[x])\land_{L} altGenero(listas[x])}			

			\end{proc}
		
		\subsubsection{Predicados Especificos}
		
			\pred{cantCandidatosCorrecta}{cant\_bancas: \ent, partido: \TLista{dni:\ent \times genero: \ent}}{cant\_bancas=|partido|}

			\pred{altGenero}{partido: \TLista{dni:\ent \times genero: \ent}}{(((\forall n: \ent)(n>0))\longrightarrow_{L} ( ((n\mod2=0)\longrightarrow_{L} (partido[n,1]=1)) \land_{L } ((n\mod2=1)\longrightarrow_{L} (partido[n,1]=2)) \lor_{L} ((n \mod 2 = 0) \longrightarrow_{L} (partido[n,1]=2 \land_{L} (n \mod 2=1) \longrightarrow_{L} partido[n,1]=1))}
	





	\subsection{Auxiliares}

		\aux{sumaDeVotos}{\In escrutinio : \TLista{\ent}}{\ent}{\sum\limits_{i=0}^{|escrutinio| - 1} escrutinio[i]}

		\aux{porcentajeDeVotos}{\In escrutinio: \TLista{\ent}, \In partido: \TLista{\ent}}{\float}{sumaDeVotos(escrutinio)^{-1} *escrutinio[partido]*10^{2})}

		\aux{bancasDe}{\In indicePartido: \ent, \In bancas, \In dHont  \TLista{\TLista{\ent}}}{\ent}{ \\ \sum\limits_{p=0}^{bancas - 1} if \: cocienteGanador(indicePartido, p, dHont) \: then \: 1 \:  else \: 0}
	





	\subsection{Predicados Universales}
		
		\pred{noHayRepetidos}{\In escrutinio : \TLista{\ent}}{(\forall x: \ent)(0 \leq x < |escrutinio| \: \longrightarrow_{L} \: ((\forall y: \ent)(0 \leq y < |escrutinio| \: \land  \: \neg(x=y) \: \longrightarrow_{L }\neg(escrutinio[x] = escrutinio[y])))}
		
		\pred{cantVotosValidos}{\In escrutinio : \TLista{\ent}}{((\forall x: \ent)(0 \leq x < |escrutinio|) \: \longrightarrow_{L } (escrutinio[x] \geq 0))}
	
		\pred{escrutinioValdio}{\In escrutinio: \TLista{\ent}}{|escrutinio| \geq 2}
		
		\pred{EleccionValida}{\In escrutinio: \TLista{\ent}}{nohayRepetidos(escrutinio) \land cantVotosValidos(escrutinio) \land escrutinioValido(escrutinio)}
		
		\pred{umbralElectoral}{\In escrutinioSen : \TLista{\ent}}{((\forall x: \ent)(0 \leq x < |escrutinio|) \: \longrightarrow_{L } (escrutinioSen[x] > 3))}
		


\section{Implementaciones y demostraciones de correctitud}

	\subsection{Implementaciones}
		
		\subsubsection{hayBallotage}
		% Para hacer que quede todo en una misma linea, se puede usar minipage
			\begin{minipage}[t]{\textwidth}
				\begin{lstlisting}[caption={()},label=code:for]
					res:=True
					tans:=0
					primero:=0
					segundo:=0
					i:=0
					suma :=0
					while (escrutinio.size() > i) do
						suma:= suma + escrutinio[i]
						i:=i+1
					endwhile
					i:=0
					while (escrutinio.size() > i) do
						escrutinio[i]=(escrtuinio[i]*100)/suma
						i:=i+1
					endwhile
					i:=0
					while (escrutinio.size() > i) do 
						if (segundo < escrutinio[i]) then
							segundo:=escrtuinio[i]
						else:
							skip
						endif
						if (primero < segundo) then
							trans := primero
							primero := segundo
							segundo := trans
						else:
							skip
						endif
						i:=i+1
					endwhile
					if (primero > 45) then
						res := false
					else
						if ((primero > 40) && (primero - segundo >= 10)) then
							res:=false
						else
							skip
						endif
					endif

				\end{lstlisting}
			\end{minipage}

		\subsubsection{hayFraude}
			\begin{minipage}[t]{\textwidth}
				\begin{lstlisting}[caption={()},label=code:for]
						res := True
						sumaPres:=0
						sumaDip:=0
						sumaSen:=0				
						while (escrutinio_Presidencial.size() > i) do
							sumaPres:= sumaPres + escrutinio_Presidencial[i]
							i:=i+1
						endwhile
						i:=0
						while (escrutinio_Diputados.size() > i) do
							sumaDip:= sumaDip + escrutinio_Diputados[i]
							i:=i+1
						endwhile
						i:=0
						while (escrutinio_Senadores.size() > i) do
							sumaSen:= sumaSen + escrutinio_Senadores[i]
							i:=i+1
						endwhile
						if (sumaPres = sumaDip && sumaPres = sumaSen) then 
							res := False
						else:
							skip
						endif
				\end{lstlisting}
			\end{minipage}

		\subsubsection{obetenerSenadores}
			\begin{minipage}[t]{\textwidth}
				\begin{lstlisting}[caption={()},label=code:for]
						tran := 0
						primero := 0
						segundo :=0
						i := 0
						while (escrutinio.size() > i) do
							if (escrutinio[segundo] < escrutinio[i]) then
								segundo := i
							else:
								skip
							endif
							if (escrutinio[primero] < escrutinio[segundo]) do
								trans := primero
								primero := segundo
								segundo :=  trans
							else:
								skip
							endif
							i := i + 1
						endwhile	
						res := (primero,segundo)
				\end{lstlisting}
			\end{minipage}
	
		\subsubsection{obetenerSenadores}
			\begin{minipage}[t]{\textwidth}
				\begin{lstlisting}[caption={()},label=code:for]
					res1:=True
				
					i :=0
					while (listas.size() - 1 > i) do
						lf (listas[i].size() != listas[i+1].size()) then	
							res:=false
						else:
							skip
						endif
						i := i+1
					endhwihile
					if (listas[0].size() != cant_bancas) then
						res := false
					else:
						skip
					endif
					i := 0
					j := 0
					while (listas.size() > i) do
						aux := listas[i][0][1]
						while (listas[i].size() - 1 > j) do
							if (listas[i][j][1] == listas[i][0][1] && listas[i][j+1][1] != listas[i][0][1] then
								res:=false
							else:
								skip
							endif
							j := j + 2
						endwhile
						i := i + 1
					endwhile
				%%%%%%%%%%%%%%%PROBLEMAS CON CANDIDATOS IMPARES
				\end{lstlisting}
			\end{minipage}
		
		



Lo principal: las f√≥rmulas. Se puede poner en una linea, como $x_i = x_{i-1} + x_{i-2}$, o ponerse m√°s grande:

\begin{equation}
	\sum\limits_{i=0}^{n} i
	\label{eq:1}
\end{equation}

Y se pueden citar ecuaciones con \verb|\eqref{nombreDeEq}|: \eqref{eq:1}

Ejemplo de itemizado:

\begin{itemize}
	\item Item 1
	\item Item 2
	\item Item 3
\end{itemize}

Ejemplo de enumerado con menor distancia entre items:

\begin{enumerate} \setlength\itemsep{0cm}
	\item Item 1
	\item Item 2
	\item Item 3
\end{enumerate}

Podemos escribir mucho texto. Mucho texto. Mucho texto. Mucho texto. Mucho texto. Mucho texto. Mucho texto. Mucho texto. Mucho texto. Mucho texto. Mucho texto.

Otro p√°rrafo. Otro p√°rrafo. Otro p√°rrafo. Otro p√°rrafo. Otro p√°rrafo. Otro p√°rrafo. Otro p√°rrafo. Otro p√°rrafo. Otro p√°rrafo. Otro p√°rrafo. Otro p√°rrafo. Otro p√°rrafo. Otro p√°rrafo.

\vspace{0.3cm}

Le agregamos una separaci√≥n entre p√°rrafos. Le agregamos una separaci√≥n entre p√°rrafos. Le agregamos una separaci√≥n entre p√°rrafos. Le agregamos una separaci√≥n entre p√°rrafos. Le agregamos una separaci√≥n entre p√°rrafos.

\vspace{0.3cm}

La tabla \ref{tab:ejemplo} es un ejemplo de c√≥mo se hace una tabla.

\begin{table}[h!]
	\centering
	\begin{tabular}{||l c c r||} 
		\hline
		Col1 & Col2 & Col2 & Col3 \\ [0.5ex] 
		\hline\hline
		1 & 6 & 87837 & 787 \\ 
		2 & 7 & 78 & 5415 \\
		3 & 545 & 778 & 7507 \\
		4 & 545 & 18744 & 7560 \\
		5 & 88 & 788 & 6344 \\
		\hline
	\end{tabular}
	\caption{Ejemplo de tabla}
	\label{tab:ejemplo}
\end{table}


La figura \ref{fig:subfigs} es un ejemplo de c√≥mo se agrega una imagen.

\begin{figure}[ht]
	\centering
	\includegraphics[width=0.6\textwidth]{logo_dc.jpg}
	\caption{Ejemplo de figura}
	\label{fig:ejemplo}
\end{figure}

\begin{figure}[ht!]
	\begin{subfigure}{0.5\textwidth}
		\includegraphics[width=0.9\linewidth]{LaTeX-project} 
		\caption{Logo de LaTeX}
		\label{fig:subfig1}
	\end{subfigure}
	\begin{subfigure}{0.5\textwidth}
		\includegraphics[width=0.7\linewidth]{TeX}
		\caption{Logo de TeX}
		\label{fig:subfig2}
	\end{subfigure}
	\caption{Ejemplo para poner dos figuras juntas. Y citarlas por separado a (\subref{fig:subfig1}) y (\subref{fig:subfig2}).}
	% OJO: el caption siempre va antes del label
	\label{fig:subfigs}
\end{figure}



% Para hacer que quede todo en una misma linea, se puede usar minipage
%\begin{minipage}[t]{\textwidth}
	\begin{lstlisting}[caption={Ejemplo de c√≥digo (usando los estilos de la c√°tedra, ver las macros para m√°s detalles)},label=code:for]
res := 0;
i := 0;
while (i < s.size()) do
	res := res + s[i];
	i := i + 1
endwhile
	\end{lstlisting}
%\end{minipage}

Si se pone un label al \verb|lstlisting|, se puede referenciar: C√≥digo \ref{code:for}.


\subsection{Macros de la c√°tedra para especificar}

\begin{proc}{nombre}{\In paramIn : \nat, \Inout paramInout : \TLista{\ent}}{tipoRes}
	%    \modifica{parametro1, parametro2,..}
	\requiere{expresionBooleana1}
	\asegura{expresionBooleana2}
	\aux{auxiliar1}{parametros}{tipoRes}{expresion}
	\pred{pred1}{parametros}{expresion} 
\end{proc}

\aux{auxiliarSuelto}{parametros}{tipoRes}{expresion}
% \paraTodo{variable}{tipo}{expresion}
% \existe{variable}{tipo}{expresion}
% Pueden tener [unalinea] para que no se divida en varias lineas
\pred{predSuelto}{parametros}{\paraTodo[unalinea]{variable}{tipo}{algo \implicaLuego expresion}}
\pred{predSuelto}{parametros}{\existe[unalinea]{variable}{tipo}{algo \yLuego expresion}}








\end{document}
